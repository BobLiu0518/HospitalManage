#include <stdio.h> 
#include "033(1).h" 
#include <stdlib.h>
#include <string.h>
struct birthdate
{
	int year;
	int month;
	int date;
};
typedef struct users
 {
 	int user_type;// 0管理员 1医生 2患者
	long long id;
	char password[100];
	char phone[100];
	char department[100];//若非医生则不填 
	char title[100];//若非医生则不填 
	char sex[20];
	struct birthdate birth;
}USERS;
USERS user[100] ;
int read_data(USERS user[])//从文件"data.txt"中读取 
{
	int i=0;
	FILE*fp;
	fp=fopen("data.txt","r");
	  if (fp == NULL) {  
        printf("无法打开文件");  
        return -1; // 返回错误码  
    }  
	while (!feof(fp))
	{fscanf(fp,"%d",&user[i].user_type);
	if(user[i].user_type==1) 
	fscanf(fp, " %lld %99s %99s %99s %99s %19s %d %d %d", &user[i].id, user[i].password,   user[i].phone,
	  user[i].department,   user[i].title,  user[i].sex,   &user[i].birth.year,   &user[i].birth.month,
	   &user[i].birth.date);
	else
		fscanf(fp, " %lld %99s %99s %99s  %d %d %d", &user[i].id, user[i].password,   user[i].phone, 
		 user[i].sex,   &user[i].birth.year,   &user[i].birth.month,
	   &user[i].birth.date);
	   i++;
	}
	fclose(fp);
	return i;
}

int login(USERS user[], int n, long long id, char password[100]) {  
    long long input_id;  
    char input_password[100];  
  
    printf("请输入用户名: ");  
    scanf("%lld", &input_id);  
    printf("请输入密码: ");  
    scanf("%99s", input_password); 
  
    for (int i = 0; i < n; i++) {  
        if (user[i].id == input_id && strcmp(user[i].password, input_password) == 0) {  
            printf("登录成功!\n");  
     return 1; 
        }  
    }  
  
    printf("用户名或密码错误!\n");  
    return 0; 
}